CREATE TABLE COUNTRIES
(
    COUNTRY_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    NAME VARCHAR(30) NOT NULL
);

CREATE TABLE CITIES
(
    CITY_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    NAME VARCHAR(50) NOT NULL,
    COUNTRY_ID INTEGER,
    CONSTRAINT CITIES_COUNTRIES_COUNTRY_ID_FK FOREIGN KEY (COUNTRY_ID) REFERENCES COUNTRIES (COUNTRY_ID)
);

CREATE TABLE HOTEL
(
    HOTEL_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    CITY_ID INTEGER NOT NULL,
    DESCRIPTION VARCHAR(500) NOT NULL,
    STARS_NUMBER INTEGER NOT NULL,
    NAME VARCHAR(50) NOT NULL,
    CONSTRAINT HOTEL_CITIES_CITY_ID_FK FOREIGN KEY (CITY_ID) REFERENCES CITIES (CITY_ID)
);

CREATE TABLE PLANE
(
    NAME VARCHAR(10) PRIMARY KEY NOT NULL,
    DEPARTURE_CITY_ID INTEGER NOT NULL,
    DEPARTURE_TIME TIME NOT NULL,
    ARRIVAL_CITY_ID INTEGER NOT NULL,
    TRAVEL_TIME TIME NOT NULL,
    CONSTRAINT PLANE_CITIES_CITY_ID_FK FOREIGN KEY (DEPARTURE_CITY_ID) REFERENCES CITIES (CITY_ID),
    CONSTRAINT PLANE_CITIES_ARR_CITY_ID_FK FOREIGN KEY (ARRIVAL_CITY_ID) REFERENCES CITIES (CITY_ID)
);

CREATE TABLE FLIGHT
(
    FLIGHT_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    PLANE_ID VARCHAR(10) NOT NULL,
    DATE DATE NOT NULL,
    CONSTRAINT FLIGHT_PLANE_NAME_FK FOREIGN KEY (PLANE_ID) REFERENCES PLANE (NAME)
);

CREATE TABLE TOUR
(
    TOUR_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    CITY_ID INTEGER NOT NULL,
    DESCRIPTION VARCHAR(5000) NOT NULL,
    DAYS INTEGER NOT NULL,
    PRICE INTEGER NOT NULL,
    HOTEL_ID INTEGER NOT NULL,
    CONSTRAINT TOUR_CITIES_CITY_ID_FK FOREIGN KEY (CITY_ID) REFERENCES CITIES (CITY_ID),
    CONSTRAINT TOUR_HOTEL_HOTEL_ID_FK FOREIGN KEY (HOTEL_ID) REFERENCES HOTEL (HOTEL_ID)
);

CREATE TABLE VOUCHER
(
    VOUCHER_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    TOUR_ID INTEGER NOT NULL,
    FLIGHT_TO_ID INTEGER NOT NULL,
    FLIGHT_FROM_ID INTEGER NOT NULL,
    CLIENT_NUMBER INTEGER NOT NULL,
    PRICE INTEGER NOT NULL,
    CONSTRAINT VOUCHER_TOUR_TOUR_ID_FK FOREIGN KEY (TOUR_ID) REFERENCES TOUR (TOUR_ID),
    CONSTRAINT VOUCHER_FLIGHT_FLIGHT_ID_FK FOREIGN KEY (FLIGHT_TO_ID) REFERENCES FLIGHT (FLIGHT_ID),
    CONSTRAINT VOUCHER_FLIGHT_FROM_ID_FK FOREIGN KEY (FLIGHT_FROM_ID) REFERENCES FLIGHT (FLIGHT_ID)
);

CREATE TABLE HOT_TOUR
(
    HOT_TOUR_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    TOUR_ID INTEGER NOT NULL,
    CONSTRAINT HOT_TOUR_TOUR_TOUR_ID_FK FOREIGN KEY (TOUR_ID) REFERENCES TOUR (TOUR_ID)
);


CREATE TABLE CLIENT
(
    CLIENT_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    FULL_NAME VARCHAR(50) NOT NULL,
    PAPER VARCHAR(50) NOT NULL,
    DOCUMENT_NUM BIGINT NOT NULL,
    PHONE VARCHAR(20) NOT NULL,
    BIRTHDAY DATE NOT NULL,
    EMAIL VARCHAR(50) NOT NULL
);

CREATE TABLE CARD_TYPE
(
    CARD_TYPE_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    NAME VARCHAR(20) NOT NULL
);


CREATE TABLE CREDIT_CARD
(
    CREDIT_CARD_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    CARD_TYPE_ID INTEGER NOT NULL,
    OWNER_NAME VARCHAR(50) NOT NULL,
    NUMBER BIGINT NOT NULL,
    CVV_NUMBER INTEGER NOT NULL,
    DATE DATE NOT NULL,
    CONSTRAINT CREDIT_CARD_CARD_TYPE_CARD_TYPE_ID_FK FOREIGN KEY (CARD_TYPE_ID) REFERENCES CARD_TYPE (CARD_TYPE_ID)
);

CREATE TABLE ACCOUNT
(
    LOGIN VARCHAR(20) PRIMARY KEY NOT NULL,
    PASSWORD VARCHAR(50) NOT NULL
);

CREATE TABLE USER
(
    USER_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    PAPER VARCHAR(30) NOT NULL,
    DOCUMENT_NUM BIGINT NOT NULL,
    BIRTHDAY DATE NOT NULL,
    PHONE VARCHAR(20) NOT NULL,
    EMAIL VARCHAR(30) NOT NULL,
    FULL_NAME VARCHAR(50) NOT NULL,
    LOGIN_ID VARCHAR(20) NOT NULL,
    CONSTRAINT USER_ACCOUNT_LOGIN_FK FOREIGN KEY (LOGIN_ID) REFERENCES ACCOUNT (LOGIN)
);

CREATE TABLE "ADMIN"
(
    ADMIN_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    LOGIN_ID VARCHAR(20) NOT NULL,
    CONSTRAINT ADMIN_ACCOUNT_LOGIN_FK FOREIGN KEY (LOGIN_ID) REFERENCES ACCOUNT (LOGIN)
);

CREATE TABLE MONEY
(
    CREDIT_CARD_ID INTEGER NOT NULL,
    MONEY BIGINT DEFAULT 0,
    MONEY_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    LOGIN_ID VARCHAR(20) NOT NULL,
    CONSTRAINT MONEY_CREDIT_CARD_CREDIT_CARD_ID_FK FOREIGN KEY (CREDIT_CARD_ID) REFERENCES CREDIT_CARD (CREDIT_CARD_ID),
    CONSTRAINT MONEY_ACCOUNT_LOGIN_FK FOREIGN KEY (LOGIN_ID) REFERENCES ACCOUNT (LOGIN)
);

CREATE TABLE ORDERS
(
    ORDER_ID INTEGER PRIMARY KEY NOT NULL IDENTITY,
    CLIENT_ID INTEGER NOT NULL,
    VOUCHER_ID INTEGER NOT NULL,
    LOGIN_ID VARCHAR(20) NOT NULL,
    MONEY_ID INTEGER NOT NULL,
    CONSTRAINT ORDER_CLIENT_CLIENT_ID_FK FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT (CLIENT_ID),
    CONSTRAINT ORDER_VOUCHER_VOUCHER_ID_FK FOREIGN KEY (VOUCHER_ID) REFERENCES VOUCHER (VOUCHER_ID),
    CONSTRAINT ORDERS_ACCOUNT_LOGIN_FK FOREIGN KEY (LOGIN_ID) REFERENCES ACCOUNT (LOGIN),
    CONSTRAINT ORDERS_MONEY_MONEY_ID_FK FOREIGN KEY (MONEY_ID) REFERENCES MONEY (MONEY_ID)
);



